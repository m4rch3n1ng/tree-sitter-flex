=============
basic
=============

%option noyywrap

digit   [0-9]

%%

%%

-------------

(source_file
  (section1
    (alias
      (identifier)
      (rule))
    (alias
      (identifier)
      (rule)))
  (section2))

=============
comments
=============

// a line comment
/*
  a block comment
*/

%{
#include "y.tab.h"
%}

// more comments

%p 6000 /* set positions to 6000 */
%option noyywrap

/* even more comments wow */

%%

"+"                  { return PLUS;       }
"-"                  { return MINUS;      }
[ \t\n\r]            /* skip whitespace */

%%

-------------

(source_file
  (section1
    (line_comment)
    (block_comment)
    (prologue
      (embedded_code))
    (line_comment)
    (alias
      (identifier)
      (rule))
    (block_comment)
    (alias
      (identifier)
      (rule))
    (block_comment))
  (section2
    (declaration
      (string)
      (embedded_code))
    (declaration
      (string)
      (embedded_code))
    (declaration
      (rule))
    (declaration
      (rule)
      (block_comment))))

=============
embedded_code
=============

%{
#include "y.tab.h"
%}

%p 6000 /* set positions to 6000 */

%%

""                   { return THE_VOID;   }
"+"                  { return PLUS;       }

%%

int thing() {
    return true;
}

-------------

(source_file
  (section1
    (prologue
      (embedded_code))
    (alias
      (identifier)
      (rule))
    (block_comment))
  (section2
    (declaration
      (string)
      (embedded_code))
    (declaration
      (string)
      (embedded_code)))
  (embedded_code))
